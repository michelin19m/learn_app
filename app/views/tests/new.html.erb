<h1 class="text-2xl font-bold text-gray-900 mb-4">Create Test with CSV Content</h1>

<%= form_with url: part_tests_path(@part), method: :post, local: true, data: { controller: "prompt-copy" } do |form| %>
  <div class="mb-4">
    <%= form.label :title, "Test Title:", class: "block text-gray-700 font-bold mb-2" %>
    <%= form.text_field :title, class: "block w-full text-sm text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500", data: { prompt_copy_target: "title" } %>
  </div>

  <div class="mb-4">
    <%= form.label :skill, "Skill:", class: "block text-gray-700 font-bold mb-2" %>
    <%= text_field_tag :skill, @part.resource.skill.name, class: "block w-full text-sm text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500", data: { prompt_copy_target: "skill" }, readonly: true %>
  </div>

  <div class="mb-4">
    <%= form.label :resource, "Resource:", class: "block text-gray-700 font-bold mb-2" %>
    <%= text_field_tag :resource, @part.resource.name, class: "block w-full text-sm text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500", data: { prompt_copy_target: "resource" }, readonly: true %>
  </div>

  <div class="mb-4">
    <%= form.label :part, "Part:", class: "block text-gray-700 font-bold mb-2" %>
    <%= text_field_tag :part, @part.name, class: "block w-full text-sm text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500", data: { prompt_copy_target: "part" }, readonly: true %>
  </div>

  <div class="mb-4">
    <%= form.label :csv_content, "Paste CSV content:", class: "block text-gray-700 font-bold mb-2" %>
    <%= form.text_area :csv_content, rows: 10, class: "block w-full text-sm text-gray-700 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" %>
  </div>

  <div class="flex space-x-4 mb-4">
    <%= form.submit "Create Test", class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" %>
    <%= link_to 'Back', part_path(@part), class: "bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" %>
  </div>

  <div class="mt-4">
    <button data-action="prompt-copy#copy" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow focus:outline-none focus:shadow-outline">Copy OpenAI Prompt</button>
  </div>
<% end %>
